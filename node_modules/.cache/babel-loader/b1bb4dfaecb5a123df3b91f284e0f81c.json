{"ast":null,"code":"var _jsxFileName = \"/Users/macuser/Documents/react/firebase_project/src/components/Chat.js\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Button, Container, Grid, TextField } from '@material-ui/core';\nimport React, { useContext, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { Context } from '../index';\nimport Loader from './Loader';\nimport firebase from 'firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chat() {\n  _s();\n\n  const {\n    auth,\n    firestore\n  } = useContext(Context);\n  const [user] = useAuthState(auth);\n  const [value, setValue] = useState('');\n  const [messages, loading] = useCollectionData(firestore.collection('messages').orderBy('createdAt'));\n\n  const sendMessage = async () => {\n    firestore.collection('messages').add({\n      uid: user.uid,\n      displayName: user.displayName,\n      photoUrl: user.photoURL,\n      text: value,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setValue('');\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      justify: \"center\",\n      style: {\n        height: window.innerHeight - 70,\n        marginTop: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '80%',\n          height: '60vh',\n          border: '1px solid gray',\n          overflowY: 'auto'\n        },\n        children: messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: 10,\n            backgroundColor: user.uid === message.uid ? 'green' : 'red',\n            marginLeft: user.uid === message.uid ? 'auto' : '10px',\n            width: 'fit-content',\n            padding: 10,\n            borderRadius: user.uid === message.uid ? '15px 0 15px 15px' : '0 15px 15px 15px',\n            color: '#fff'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            alignItems: \"center\",\n            style: {\n              borderBottom: '1px solid #fff',\n              marginBottom: 5\n            },\n            justifyContent: true,\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                marginRight: 20,\n                marginBottom: 10\n              },\n              src: message.photoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: user.uid === message.uid ? 'Me' : message.displayName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              wordBreak: 'break-word',\n              maxWidth: 400\n            },\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: \"column\",\n        alignItems: \"flex-end\",\n        style: {\n          width: '80%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          maxRows: 2,\n          variant: \"outlined\",\n          value: value,\n          onChange: e => setValue(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: sendMessage,\n          variant: \"outlined\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chat, \"6l0fOsDo+qxDRbS+eX/mviWS0+Y=\", false, function () {\n  return [useAuthState, useCollectionData];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/Users/macuser/Documents/react/firebase_project/src/components/Chat.js"],"names":["Avatar","Button","Container","Grid","TextField","React","useContext","useState","useAuthState","useCollectionData","Context","Loader","firebase","Chat","auth","firestore","user","value","setValue","messages","loading","collection","orderBy","sendMessage","add","uid","displayName","photoUrl","photoURL","text","createdAt","FieldValue","serverTimestamp","height","window","innerHeight","marginTop","width","border","overflowY","map","message","margin","backgroundColor","marginLeft","padding","borderRadius","color","borderBottom","marginBottom","marginRight","wordBreak","maxWidth","e","target"],"mappings":"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","sourcesContent":["import { Avatar, Button, Container, Grid, TextField } from '@material-ui/core';\nimport React, { useContext, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth'\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\nimport { Context } from '../index';\nimport Loader from './Loader';\nimport firebase from 'firebase';\n\nfunction Chat() {\n\n    const { auth, firestore } = useContext(Context)\n    const [user] = useAuthState(auth)\n    const [value, setValue] = useState('')\n    const [messages, loading] = useCollectionData(\n        firestore.collection('messages').orderBy('createdAt')\n    )\n\n\n    const sendMessage = async () => {\n        firestore.collection('messages').add({\n            uid: user.uid,\n            displayName: user.displayName,\n            photoUrl: user.photoURL,\n            text: value,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n\n        })\n        setValue('')\n    }\n\n\n    if (loading) {\n        return <Loader />\n    }\n    return (\n        <Container>\n            <Grid container\n                justify=\"center\"\n                style={{ height: window.innerHeight - 70, marginTop: 20 }}>\n\n                <div style={{ width: '80%', height: '60vh', border: '1px solid gray', overflowY: 'auto' }}>\n                    {\n                        messages.map(message =>\n                            <div style={{\n                                margin: 10,\n                                backgroundColor: user.uid === message.uid ? 'green'\n                                    : 'red',\n                                marginLeft: user.uid === message.uid ? 'auto'\n                                    : '10px',\n                                width: 'fit-content',\n                                padding: 10,\n                                borderRadius: user.uid === message.uid ? '15px 0 15px 15px' : '0 15px 15px 15px',\n                                color: '#fff',\n\n                            }}>\n                                <Grid container\n                                    alignItems=\"center\"\n                                    style={{\n                                        borderBottom: '1px solid #fff',\n                                        marginBottom: 5\n                                    }}\n                                    justifyContent\n                                >\n                                    <Avatar style={{ marginRight: 20, marginBottom: 10 }} src={message.photoUrl} />\n                                    <div >{user.uid === message.uid ? 'Me' : message.displayName}</div>\n                                </Grid>\n                                <div style={{ wordBreak: 'break-word', maxWidth: 400 }}>{message.text}</div>\n                            </div>\n\n                        )\n                    }\n                </div>\n\n\n                <Grid container\n                    direction=\"column\"\n                    alignItems=\"flex-end\"\n                    style={{ width: '80%' }}\n                >\n                    <TextField\n                        fullWidth\n                        maxRows={2}\n                        variant=\"outlined\"\n                        value={value}\n                        onChange={(e) => setValue(e.target.value)}\n                    />\n                    <Button\n                        onClick={sendMessage}\n                        variant=\"outlined\"\n                    >\n                        Send\n                    </Button>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}